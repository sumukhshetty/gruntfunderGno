

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Overview &mdash; gnosis.js  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="gnosis.js  documentation" href="index.html"/>
        <link rel="up" title="Developer Guide" href="developer-guide.html"/>
        <link rel="next" title="Events, Oracles and Markets" href="events-oracles-and-markets.html"/>
        <link rel="prev" title="Installation" href="installation.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> gnosis.js
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="developer-guide.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">API Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="events-oracles-and-markets.html">Events, Oracles and Markets</a></li>
<li class="toctree-l2"><a class="reference internal" href="lmsr-primer.html">LMSR Primer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">gnosis.js</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="developer-guide.html">Developer Guide</a> &raquo;</li>
        
      <li>API Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/api-overview.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-overview">
<span id="api-overview"></span><h1>API Overview<a class="headerlink" href="#api-overview" title="Permalink to this headline">¶</a></h1>
<p>The Gnosis.js library is encapsulated inside of the <a class="reference external" href="api-reference.html#Gnosis">Gnosis</a> class. In order for it to function, it must be connected to an Ethereum network through a <a class="reference external" href="https://github.com/ethereum/wiki/wiki/JavaScript-API">Web3.js</a> interface. It also uses <a class="reference external" href="https://ipfs.io/">IPFS</a> for publishing and retrieving event data, and so it will also have to be connected to an IPFS node. Configuration of these connections can be done with a call to the asynchronous factory function <a class="reference external" href="api-reference.html#Gnosis.create">Gnosis.create</a>. For example, the following code will store an instance of the Gnosis.js library into the variable <code class="docutils literal notranslate"><span class="pre">gnosis</span></code>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">gnosis</span>

<span class="nx">Gnosis</span><span class="p">.</span><span class="nx">create</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">gnosis</span> <span class="o">=</span> <span class="nx">result</span>
    <span class="c1">// gnosis is available here and may be used</span>
<span class="p">})</span>

<span class="c1">// note that gnosis is NOT guaranteed to be initialized outside the callback scope here</span>
</pre></div>
</div>
<p>Because of the library’s dependence on remote service providers and the necessity to wait for transactions to complete on the blockchain, the majority of the methods in the API are asynchronous and return thenables in the form of <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises">Promises</a>.</p>
<p>Gnosis.js also relies on <a class="reference external" href="https://github.com/trufflesuite/truffle-contract">Truffle contract abstractions</a>. In fact, much of the underlying core contract functionality can be accessed in Gnosis.js as one of these abstractions. Since the Truffle contract wrapper has to perform asynchronous actions such as wait on the result of a remote request to an Ethereum RPC node, it also uses thenables. For example, here is how to use the on-chain Gnosis <a class="reference external" href="https://gnosis.github.io/gnosis-contracts/docs/Math/">Math</a> library exposed at <a class="reference external" href="api-reference.html#Gnosis.contracts">Gnosis.contracts</a> to print the approximate natural log of a number:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">ONE</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">64</span><span class="p">)</span>
<span class="nx">Gnosis</span><span class="p">.</span><span class="nx">create</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">gnosis</span> <span class="p">=&gt;</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">contracts</span><span class="p">.</span><span class="nb">Math</span><span class="p">.</span><span class="nx">deployed</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">math</span> <span class="p">=&gt;</span> <span class="nx">math</span><span class="p">.</span><span class="nx">ln</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="nx">ONE</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Math.ln(3) =&#39;</span><span class="p">,</span> <span class="nx">result</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">()</span> <span class="o">/</span> <span class="nx">ONE</span><span class="p">))</span>
</pre></div>
</div>
<p>Although it is not strictly necessary, usage of <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function"><code class="docutils literal notranslate"><span class="pre">async/await</span></code></a> syntax is encouraged for simplifying the use of thenable programming, especially in complex flow scenarios. To increase the readability of code examples from this point forward, this guide will assume <code class="docutils literal notranslate"><span class="pre">async/await</span></code> is available and snippets execute in the context of an <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function"><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">function</span></code></a>. With those assumptions, the previous example can be expressed like so:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">ONE</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">64</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">gnosis</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">Gnosis</span><span class="p">.</span><span class="nx">create</span><span class="p">()</span>
<span class="kr">const</span> <span class="nx">math</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">contracts</span><span class="p">.</span><span class="nb">Math</span><span class="p">.</span><span class="nx">deployed</span><span class="p">()</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Math.ln(3) =&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">await</span> <span class="nx">math</span><span class="p">.</span><span class="nx">ln</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="nx">ONE</span><span class="p">)).</span><span class="nx">valueOf</span><span class="p">()</span> <span class="o">/</span> <span class="nx">ONE</span><span class="p">)</span>
</pre></div>
</div>
<p>Gnosis.js also exposes a number of convenience methods wrapping contract operations such as <a class="reference external" href="api-reference.html#createCentralizedOracle">Gnosis.createCentralizedOracle</a> and <a class="reference external" href="api-reference.html#createScalarEvent">Gnosis.createScalarEvent</a>.</p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="events-oracles-and-markets.html" class="btn btn-neutral float-right" title="Events, Oracles and Markets" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Gnosis.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>